<header class="flex flex-wrap sm:justify-start sm:flex-nowrap w-full bg-white text-sm py-4 dark:bg-gray-800">
  <nav class="max-w-[85rem] w-full mx-auto px-4 flex flex-wrap basis-full items-center justify-between"
       aria-label="Global">
    <!-- Logo -->
    <a class="sm:order-1 md:mb-0 flex-none text-xl font-semibold dark:text-white" [routerLink]="['/']">Stream Fiesta</a>

    <!-- Mobile Menu Button -->
    <button type="button"
            class="sm:hidden md:mb-0 hs-collapse-toggle p-2.5 inline-flex justify-center items-center gap-x-2 rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-transparent dark:border-gray-700 dark:text-white dark:hover:bg-white/10 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
            [ngClass]="{'mb-4' : currentPage !== '/'}"
            (click)="isOpenMenu = !isOpenMenu"
            aria-controls="navbar-alignment"
            aria-label="Toggle navigation">
      <svg class="hs-collapse-open:hidden flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
           height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
           stroke-linejoin="round">
        <line x1="3" x2="21" y1="6" y2="6"/>
        <line x1="3" x2="21" y1="12" y2="12"/>
        <line x1="3" x2="21" y1="18" y2="18"/>
      </svg>
      <svg class="hs-collapse-open:block hidden flex-shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24"
           height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
           stroke-linejoin="round">
        <path d="M18 6 6 18"/>
        <path d="m6 6 12 12"/>
      </svg>
    </button>

    <!-- Search Box -->
    <app-search-box class="sm:order-2 w-full sm:w-auto" *ngIf="showSearchBox"></app-search-box>

    <!-- Navigation Items -->
    <div
      class="hs-collapse overflow-hidden transition-all duration-300 basis-full grow sm:grow-0 sm:basis-auto sm:block sm:order-2"
      [ngClass]="{hidden: !isOpenMenu}">
      <div class="flex flex-col gap-5 mt-5 sm:flex-row sm:items-center sm:mt-0 sm:ps-5">
        <!-- Regular Nav Links -->
        <a [ngClass]="{'font-medium text-blue-500 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600': currentPage === '/',
  'font-medium text-gray-600 hover:text-gray-400 dark:text-gray-400 dark:hover:text-gray-500': currentPage !== '/'}"
           aria-current="page"
           [routerLink]="['/']">Home</a>

        <a [ngClass]="{'font-medium text-blue-500 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600': currentPage === '/about',
  'font-medium text-gray-600 hover:text-gray-400 dark:text-gray-400 dark:hover:text-gray-500': currentPage !== '/about'}"
           [routerLink]="['/about']">About</a>

        <!-- Auth Section -->
        <ng-container *ngIf="(authService.user$ | async) as user; else authLinks">
          <!-- Wishlist Button -->
          <a [routerLink]="['/wishlist']"
             class="inline-flex items-center gap-x-2 text-gray-600 hover:text-gray-400 dark:text-gray-400">
            <svg xmlns="http://www.w3.org/2000/svg"
                 class="h-5 w-5"
                 fill="none"
                 viewBox="0 0 24 24"
                 stroke="currentColor">
              <path stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
            </svg>
            <span class="hidden sm:inline">Wishlist</span>
          </a>

          <!-- User Menu -->
          <div class="relative group">
            <button class="flex items-center gap-2 font-medium text-gray-600 hover:text-gray-400 dark:text-gray-400">
              <span>{{ user.username }}</span>

            </button>
            <div
              class="absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-gray-700 hidden group-hover:block z-50">
              <div class="py-1">
                <a [routerLink]="['/profile']"
                   class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600">
                  Profile
                </a>
                <a [routerLink]="['/wishlist']"
                   class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 sm:hidden">
                  Wishlist
                </a>
              </div>
            </div>
          </div>

          <!-- Logout Button -->
          <button
          (click)="logout()"
          class="inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent
          text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400">
          <svg xmlns="http://www.w3.org/2000/svg"
               class="h-5 w-5"
               fill="none"
               viewBox="0 0 24 24"
               stroke="currentColor">
            <path stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
          </svg>
          <span class="hidden sm:inline">Logout</span>
          </button>
        </ng-container>

        <!-- Auth Links for Non-authenticated Users -->
        <ng-template #authLinks>
          <a [routerLink]="['/auth']"
             [ngClass]="{'font-medium text-blue-500': currentPage === '/auth',
  'font-medium text-gray-600 hover:text-gray-400 dark:text-gray-400': currentPage !== '/auth'}"
             class="inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-500 dark:hover:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600">
            Sign in
          </a>
        </ng-template>
      </div>
    </div>
  </nav>
</header>
