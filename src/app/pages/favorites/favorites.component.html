<main class="flex min-h-screen flex-col bg-gray-50 dark:bg-gray-900">
  <app-navbar [showSearchBox]="true"></app-navbar>
  <div class="container mx-auto px-4 py-8">
    <ng-container *ngIf="auth.isLoggedIn$ | async; else notAuthenticated">
      <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">My Wishlist</h1>

      <!-- Loading State -->
      <ng-container *ngIf="isLoading$ | async">
        <div class="flex justify-center items-center min-h-[400px]">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 dark:border-white"></div>
        </div>
      </ng-container>

      <!-- Error State -->
      <ng-container *ngIf="error$ | async as error">
        <div class="bg-red-50 p-4 rounded-lg mb-6">
          <p class="text-red-700">{{ error }}</p>
        </div>
      </ng-container>

      <!-- Content -->
      <ng-container *ngIf="movies$ | async as movies">
        <!-- Empty State -->
        <div *ngIf="!(isLoading$ | async) && movies.length === 0" class="text-center py-12">
          <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24"
               stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
          </svg>
          <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No movies in wishlist</h3>
          <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Start adding some movies to your wishlist!</p>
          <div class="mt-6">
            <a [routerLink]="['/']"
               class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
              Browse Movies
            </a>
          </div>
        </div>

        <!-- Movie Grid -->
        <app-movies-grid *ngIf="!(isLoading$ | async) && movies.length > 0"
                         [movies]="movies">
        </app-movies-grid>
      </ng-container>
    </ng-container>

    <!-- Not Authenticated Template -->
    <ng-template #notAuthenticated>
      <div class="text-center py-12">
        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24"
             stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">Please login to view your wishlist</h3>
        <div class="mt-6">
          <button (click)="auth.login()"
                  class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
            Login
          </button>
        </div>
      </div>
    </ng-template>
  </div>
</main>
